#:import b kivy.uix.behaviors.togglebutton
#default number of results to load
#:set def_results '20'

<Filter>:
    height: 40
    size_hint: 1, None
    Label:
        id: labeltext
        text: root.label
        size_hint_x: 0.8
    Button:
        text: 'Remove'
        on_release: root.remove()
        size_hint_x: 0.2

<ResultItem>:
    height: 100
    size_hint: 1, None
    canvas:
        Color:
            rgb: 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size
    CheckBox:
        id: check
        size_hint_x: None
        width: 40
    AsyncImage:
        source: root.source
        size_hint_x: 0.2
    BlackLabel:
        size_hint_x: 0.7
        text: root.text
        max_lines: 3
        shorten: True


<SearchResults>:
    VertiBox:
        size: root.size
        pos: root.pos
        Label:
            id: no_results
            text: 'No results found'
            height: '0dp'
            size_hint_y: None
            opacity: 0
        ScrollView:
            scroll_type: ['bars']
            bar_width: '10dp'
            GridLayout:
                id: grid
                cols: 2
                spacing: 2
                size_hint_y: None
                height: self.minimum_height
        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: 'Close'
                on_release: root.cancel()
            Button:
                text: 'Toggle All'
                on_release: root.toggle_all()
            Button:
                text: 'Add to Scrape Queue'
                on_release: root.add_to_queue()


<SearchScreen>:
    id: searchscreen
    VertiBox:
        padding: [20]*4
        VertiBox:
            size_hint_y: 0.9
            Label:
                size_hint_y: 0.05
                text: 'I\'m looking for someone..'
                halign: 'left'
                text_size: self.size
            BoxLayout:
                size_hint_y: 0.1
                ToggleButton:
                    text: 'named..'
                    group: 'options'
                    ident: 'named'
                    on_press: root.set_option()
                ToggleButton:
                    text: 'friends with..'
                    group: 'options'
                    ident: 'friends'
                    on_press: root.set_option()
                ToggleButton:
                    text: 'who lives in..'
                    group: 'options'
                    ident: 'lives'
                    on_press: root.set_option()
                ToggleButton:
                    text: 'who likes..'
                    group: 'options'
                    ident: 'likes'
                    on_press: root.set_option()
                Button:
                    id: male
                    text: 'male'
                    ident: 'male'
                    on_release: root.add_filter(self)
                Button:
                    id: female
                    text: 'female'
                    ident: 'female'
                    on_release: root.add_filter(self)
            BoxLayout:
                size_hint_y: 0.1
                TextInput:
                    id: textinput
                    multiline: False
                    disabled: True
                    on_text_validate: filter_btn.dispatch('on_release')
                Button:
                    id: filter_btn
                    size_hint_x: 0.15
                    text: 'Add filter'
                    disabled: len(textinput.text) == 0
                    on_release: root.add_option()
            ScrollView:
                #size_hint_y: 0.75
                scroll_type: ['bars']
                bar_width: '10dp'
                GridLayout:
                    id: scrollview
                    cols: 1
                    spacing: 5
                    size_hint_y: None
                    height: self.minimum_height
        BoxLayout:
            size_hint_y: 0.05
            Widget:
                size_hint_x: 0.7
            Label:
                size_hint_x: 0.25
                text: 'Limit results (default: {})'.format(def_results)
                text_size: self.size
                halign: 'right'
                valign: 'middle'
            TextInput:
                id: res_lim
                input_filter: 'int'
                size_hint_x: 0.05
                multiline: False
                text: def_results
                hint_text: def_results
        BoxLayout:
            size_hint_y: 0.1
            Button:
                text: 'Back'
                on_release: root.go_back()
            Button:
                id: search_btn
                text: 'Search'
                disabled: True
                on_release: root.search(res_lim.text)
